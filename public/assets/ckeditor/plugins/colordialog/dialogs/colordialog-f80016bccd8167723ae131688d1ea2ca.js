/*
Copyright (c) 2003-2011, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
CKEDITOR.dialog.add("colordialog",function(e){function u(){n.getById(x).removeStyle("background-color"),s.getContentElement("picker","selectedColor").setValue("")}function a(e){e instanceof CKEDITOR.dom.event||(e=new CKEDITOR.dom.event(e));var t=e.getTarget(),n;t.getName()=="a"&&(n=t.getChild(0).getHtml())&&s.getContentElement("picker","selectedColor").setValue(n)}function f(e){e instanceof CKEDITOR.dom.event||(e=e.data);var t=e.getTarget(),r;t.getName()=="a"&&(r=t.getChild(0).getHtml())&&(n.getById(E).setStyle("background-color",r),n.getById(S).setHtml(r))}function l(){n.getById(E).removeStyle("background-color"),n.getById(S).setHtml("&nbsp;")}function g(){function n(t,n){for(var i=t;i<t+3;i++){var s=y.$.insertRow(-1);for(var o=n;o<n+3;o++)for(var u=0;u<6;u++)r(s,"#"+e[o]+e[u]+e[i])}}function r(e,n){var r=new t(e.insertCell(-1));r.setAttribute("class","ColorCell"),r.setStyle("background-color",n),r.setStyle("width","15px"),r.setStyle("height","15px");var i=r.$.cellIndex+1+18*e.rowIndex;r.append(CKEDITOR.dom.element.createFromHtml('<a href="javascript: void(0);" role="option" aria-posinset="'+i+'"'+' aria-setsize="'+234+'"'+' style="cursor: pointer;display:block;width:100%;height:100% " title="'+CKEDITOR.tools.htmlEncode(n)+'"'+' onkeydown="CKEDITOR.tools.callFunction( '+m+', event, this )"'+' onclick="CKEDITOR.tools.callFunction('+p+', event, this ); return false;"'+' tabindex="-1"><span class="cke_voice_label">'+n+"</span>&nbsp;</a>",CKEDITOR.document))}var e=["00","33","66","99","cc","ff"];n(0,0),n(3,0),n(0,3),n(3,3);var i=y.$.insertRow(-1);for(var s=0;s<6;s++)r(i,"#"+e[s]+e[s]+e[s]);for(var o=0;o<12;o++)r(i,"#000000")}var t=CKEDITOR.dom.element,n=CKEDITOR.document,r=CKEDITOR.tools,i=e.lang.colordialog,s,o={type:"html",html:"&nbsp;"},c=r.addFunction(l),h=a,p=CKEDITOR.tools.addFunction(h),d=f,v=l,m=CKEDITOR.tools.addFunction(function(t){t=new CKEDITOR.dom.event(t);var n=t.getTarget(),r,i,s=t.getKeystroke(),o=e.lang.dir=="rtl";switch(s){case 38:if(r=n.getParent().getParent().getPrevious())i=r.getChild([n.getParent().getIndex(),0]),i.focus(),v(t,n),d(t,i);t.preventDefault();break;case 40:if(r=n.getParent().getParent().getNext())i=r.getChild([n.getParent().getIndex(),0]),i&&i.type==1&&(i.focus(),v(t,n),d(t,i));t.preventDefault();break;case 32:h(t),t.preventDefault();break;case o?37:39:if(r=n.getParent().getNext())i=r.getChild(0),i.type==1?(i.focus(),v(t,n),d(t,i),t.preventDefault(!0)):v(null,n);else if(r=n.getParent().getParent().getNext())i=r.getChild([0,0]),i&&i.type==1?(i.focus(),v(t,n),d(t,i),t.preventDefault(!0)):v(null,n);break;case o?39:37:(r=n.getParent().getPrevious())?(i=r.getChild(0),i.focus(),v(t,n),d(t,i),t.preventDefault(!0)):(r=n.getParent().getParent().getPrevious())?(i=r.getLast().getChild(0),i.focus(),v(t,n),d(t,i),t.preventDefault(!0)):v(null,n);break;default:return}}),y=new t("table");g();var b=y.getHtml(),w=function(e){return CKEDITOR.tools.getNextId()+"_"+e},E=w("hicolor"),S=w("hicolortext"),x=w("selhicolor"),T=w("color_table_label");return{title:i.title,minWidth:360,minHeight:220,onLoad:function(){s=this},contents:[{id:"picker",label:i.title,accessKey:"I",elements:[{type:"hbox",padding:0,widths:["70%","10%","30%"],children:[{type:"html",html:'<table role="listbox" aria-labelledby="'+T+'" onmouseout="CKEDITOR.tools.callFunction( '+c+' );">'+(CKEDITOR.env.webkit?"":b)+'</table><span id="'+T+'" class="cke_voice_label">'+i.options+"</span>",onLoad:function(){var e=CKEDITOR.document.getById(this.domId);e.on("mouseover",f),CKEDITOR.env.webkit&&e.setHtml(b)},focus:function(){var e=this.getElement().getElementsByTag("a").getItem(0);e.focus()}},o,{type:"vbox",padding:0,widths:["70%","5%","25%"],children:[{type:"html",html:"<span>"+i.highlight+'</span>												<div id="'+E+'" style="border: 1px solid; height: 74px; width: 74px;"></div>												<div id="'+S+'">&nbsp;</div><span>'+i.selected+'</span>												<div id="'+x+'" style="border: 1px solid; height: 20px; width: 74px;"></div>'},{type:"text",label:i.selected,labelStyle:"display:none",id:"selectedColor",style:"width: 74px",onChange:function(){try{n.getById(x).setStyle("background-color",this.getValue())}catch(e){u()}}},o,{type:"button",id:"clear",style:"margin-top: 5px",label:i.clear,onClick:u}]}]}]}]}});